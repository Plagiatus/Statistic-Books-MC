<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stats to Scoreboards</title>
    <script src="script.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="jszip.min.js"></script>

    <style>
        fieldset {
            border: 1px solid gray;
            padding: 0.5rem;
            margin: 0.5rem;
        }
    </style>
</head>
<body class="m-3">
    <h1>Stats to Scoreboards</h1>
    <p>
        Allows you to sync up the existing stats in a world to a newly created scoreboard.
    </p>
    <p class="alert alert-info">You should only run this once and only for scoreboards that aren't in sync with their actual stats values, as it loads the current stats file into a function file. If you've set up the objectives with the correct stats, it should stay in sync automatically from there.</p>
    <h2>How to</h2>
    <p>
        Enter into the "stat" field the complete identifier of the stat you want turn into a scoreboard (e.g. <code>minecraft:dropped.minecraft:stone</code>). <br>
        Enter into the "objective" field the scoreboard objective that you want it to be saved into (e.g. <code>sb.dropped.stone</code>). <br>
        <br>
        Use the file selection to select all relevant stats files to be included.
        <br>
        <br>
        Click either the "create function" button to get a function file or "create datapack" button to create an entire datapack with this function for ease of use (run as <code>/function sb:sync_scores</code>).
    </p>
    <fieldset id="files-wrapper" class="alert alert-light">
        <label>
            Stats files (generally you want to select all files from one world/stats folder to include all players)<br>
            <input type="file" name="files" id="files" multiple accept=".json">
        </label>
    </fieldset>
    <div id="wrapper">
    </div>
    <button class="m-1 btn btn-success" id="more">more stats</button>
    <div class="d-flex flex-column">
        <label title="Setting scores of UUIDs directly seems to cause issues">Use Names instead of UUIDs
            <input type="checkbox" name="useNames" id="useNames" checked="true">
        </label>
        <span class="text-body-secondary fw-lighter">There seem to be issues with setting the scoreboard to a UUID directly instead of the name, hence this option is enabled by default. It will take longer to generate the first time you do this.</span>
    </div>
    <div class="d-flex flex-column">
        <label title="asdf">Create objective in function
            <input type="checkbox" name="createScoreboards" id="createScoreboards">
        </label>
        <span class="text-body-secondary fw-lighter">Creates the objective inside the function. Useful when you don't want to create the objective manually.</span>
    </div>
    <button class="m-1 btn btn-secondary" id="function">create function</button>
    <button class="m-1 btn btn-primary" id="datapack">create datapack</button>
    <output id="output"></output>
</body>
</html>